<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebLM - AI 助手</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <!-- Inline SVG sprite (Heroicons-style). Keeps CSP-friendly, no CDN needed. -->
  <svg
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
    focusable="false"
    style="position:absolute;width:0;height:0;overflow:hidden"
  >
    <symbol id="hi-chat-bubble-oval-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z" />
    </symbol>

    <symbol id="hi-microphone" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m0 0h-3.75m3.75 0H15.75M12 15.75a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v6.75a3 3 0 0 0 3 3Z" />
    </symbol>

    <symbol id="hi-play" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347A1.125 1.125 0 0 1 5.25 18.347V5.653Z" />
    </symbol>

    <symbol id="hi-paper-airplane" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 12 3.269 3.126A59.768 59.768 0 0 1 21.485 12 59.77 59.77 0 0 1 3.27 20.876L6 12Zm0 0h7.5" />
    </symbol>

    <symbol id="hi-pause" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25v13.5m-7.5-13.5v13.5" />
    </symbol>
  </svg>

  <div class="sidepanel-container">
    <!-- 主聊天界面 -->
    <div class="sp-main-view" id="sp-main-view">
      <!-- 消息容器 -->
      <div class="sp-messages" id="sp-messages">
        <div class="sp-message sp-message-assistant">
          <div class="sp-message-content">
            你好！我是 WebLM。我可以帮你理解当前页面的内容，回答你的问题，还能用语音和你交流。
          </div>
        </div>
      </div>

      <!-- 输入区域 -->
      <div class="sp-input-container" id="sp-input-container">
        <div class="sp-input-pill" role="group" aria-label="输入">
          <button class="sp-pill-btn sp-pill-btn-left" id="sp-new-conv-btn" title="新建对话" aria-label="新建对话">
            <svg class="sp-icon" aria-hidden="true"><use href="#hi-chat-bubble-oval-left"></use></svg>
          </button>
          <input 
            type="text" 
            class="sp-input" 
            id="sp-input" 
            placeholder="问一问..."
          />
          <button class="sp-pill-btn sp-pill-btn-right" id="sp-input-voice-btn" title="语音输入" aria-label="语音输入">
            <svg class="sp-icon" aria-hidden="true"><use id="sp-right-action-icon-use" href="#hi-microphone"></use></svg>
          </button>
        </div>
        <button class="sp-play-btn" id="sp-play-btn" title="播放" aria-label="播放">
          <svg class="sp-icon" aria-hidden="true"><use id="sp-play-icon-use" href="#hi-play"></use></svg>
        </button>
      </div>

      <!-- 语音指示器 -->
      <div class="sp-voice-indicator" id="sp-voice-indicator" style="display: none;">
        <div class="sp-voice-waves">
          <span></span><span></span><span></span><span></span><span></span>
        </div>
        <span>正在听...</span>
      </div>
    </div>

  </div>

  <script src="sidepanel.js"></script>
</body>
</html>
